
<div class="container">
  <div class="row mt-5">
    <div style="width:100%">
      <h1>View results</h1>
      <br><br>
      <ul *ngIf="result$ | async as result$ else noData">
        <div *ngIf="loaded">
          <div class="card mb-4">
            <div class="card-body">
            <p><strong>Date generated:</strong> {{result$.timestamp}}</p>
            <p><strong>Workloads included in this result:</strong></p>
            <ul>
            <li *ngFor="let input of result$.input_descriptions">{{input}}</li>
            </ul>
            </div>
            </div>
          <line-chart [resultData]="result"></line-chart>

          <!-- Insights table-->
          <table class="table table-striped mt-5">
            <thead>
              <tr>
                <th scope="col">Provider</th>
                <th scope="col">Solution</th>
                <th scope="col">Total cost</th>
                <th scope="col">Utilisation: <br> ( CPU | Memory | I/O | Storage )</th>
                <th scope="col">Value of wasted resources</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let solution of result.data">

                <th [style.color]="providerHelper.getColour(solution.provider)" >{{providerHelper.getName(solution.provider)}}</th>
                <td>{{solution.title}}</td>
                <td>{{solution.total_cost  | currency}}</td>
                <td>{{solution.utilisation_cpu}} | {{solution.utilisation_memory}} | {{solution.utilisation_io}} | {{solution.utilisation_storage}}</td>
                <td>{{solution.wasteCost | currency}}</td>
              </tr>
            </tbody>
          </table>

        </div>
      </ul>
      <ng-template #noData>Loading...</ng-template>
    </div>
  </div>
</div>
